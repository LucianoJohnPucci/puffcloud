<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Reddit Dashboard</title>
  <style>
    /* Basic styling */
    body, html {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }

    /* Dashboard layout */
    .dashboard {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto 1fr 1fr 1fr 1fr;
      gap: 10px;
      padding: 20px;
      height: 100vh;
      box-sizing: border-box;
      overflow-y: auto;
    }

    /* Title styling */
    h1 {
      grid-column: span 2;
      text-align: center;
      font-size: 3em;
      font-weight: bold;
      margin: 0 0 20px;
    }

    /* Window styling */
    .window {
      border: 2px solid #333;
      padding: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow: auto;
      height: 100%;
    }

    /* Layout for specific windows */
    #youtube {
      grid-column: 2 / 3;
      grid-row: 2 / 3;
      aspect-ratio: 1 / 1; /* Make it a square */
    }
    
    #engage-velocity {
      grid-column: 1 / 2;
      grid-row: 2 / 3;
    }

    /* Make the remaining windows span the entire width of the page */
    .full-width {
      grid-column: span 2;
      height: 50vh; /* Half the viewport height for each section */
    }

    /* Table styling */
    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      border: 1px solid #333;
      padding: 8px;
      text-align: center;
    }
  </style>
</head>
<body>

  <!-- Title -->
  <h1>Artificial Intelligence Reddit Dashboard</h1>

  <!-- Dashboard layout with YouTube and Engage Velocity windows at the top -->
  <div class="dashboard">

    <!-- Engage Velocity (top left) -->
    <div class="window" id="engage-velocity">
      <h2>Engage Velocity</h2>
      <p id="engage-velocity-content">Loading...</p>
    </div>

    <!-- YouTube Video (top right, large square) -->
    <div class="window" id="youtube">
      <h2>YouTube Video</h2>
      <iframe width="100%" height="100%" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>

    <!-- Stacked full-width windows below -->
    <div class="window full-width" id="window1">
      <h2>Newest Subreddits</h2>
      <p id="newest-subreddits">Loading...</p>
    </div>

    <div class="window full-width" id="window2">
      <h2>Oldest Subreddits</h2>
      <p id="oldest-subreddits">Loading...</p>
    </div>

    <div class="window full-width" id="window3">
      <h2>Highest Comments</h2>
      <p id="highest-comments">Loading...</p>
    </div>

    <div class="window full-width" id="window4">
      <h2>Highest Upvotes</h2>
      <p id="highest-upvotes">Loading...</p>
    </div>

    <div class="window full-width" id="window5">
      <h2>Upvotes per Day</h2>
      <p id="upvotes-per-day">Loading...</p>
    </div>

    <div class="window full-width" id="window7">
      <h2>Comments per Day</h2>
      <p id="comments-per-day">Loading...</p>
    </div>

  </div>

  <!-- JavaScript for loading data into the windows -->
  <script>
    const dataUrls = {
      newestSubreddits: './NewestSubReddits.json',
      oldestSubreddits: './OldestSubReddits.json',
      highestComments: './HighestCommentsReddits.json',
      highestUpvotes: './HighestUpvoteReddits.json',
      upvotesPerDay: './UpvotesPerDayReddits.json',
      engageVelocity: './EngageVelocityReddits.json',
      commentsPerDay: './CommentsPerDayReddits.json'
    };

    function fetchDataAndDisplay(url, elementId) {
      fetch(url)
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status} for ${url}`);
          }
          return response.json();
        })
        .then(data => {
          if (Array.isArray(data) && data.length > 0) {
            const timestamp = new Date().toLocaleString();

            const table = `
              <table>
                <caption style="font-weight: bold; text-align: left;">Last Updated: ${timestamp}</caption>
                <thead>
                  <tr>
                    <th>Subreddit</th>
                    <th>Title</th>
                    <th>Comments/Day</th>
                    <th>Comments</th>
                    <th>Link</th>
                  </tr>
                </thead>
                <tbody>
                  ${data.map(item => `
                    <tr>
                      <td>${item.Subreddit}</td>
                      <td>${item.Title}</td>
                      <td>${item.CommentsPerDay}</td>
                      <td>${item.NumberOfComments}</td>
                      <td><a href="${item.PostLink}" target="_blank">Link</a></td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            `;
            document.getElementById(elementId).innerHTML = table;
          } else {
            document.getElementById(elementId).textContent = "No data available";
          }
        })
        .catch(error => {
          console.error(`Error fetching data from ${url}:`, error);
          document.getElementById(elementId).textContent = `Error loading data: ${error.message}`;
        });
    }

    // Fetch data for each section
    fetchDataAndDisplay(dataUrls.newestSubreddits, "newest-subreddits");
    fetchDataAndDisplay(dataUrls.oldestSubreddits, "oldest-subreddits");
    fetchDataAndDisplay(dataUrls.highestComments, "highest-comments");
    fetchDataAndDisplay(dataUrls.highestUpvotes, "highest-upvotes");
    fetchDataAndDisplay(dataUrls.upvotesPerDay, "upvotes-per-day");
    fetchDataAndDisplay(dataUrls.engageVelocity, "engage-velocity-content");
    fetchDataAndDisplay(dataUrls.commentsPerDay, "comments-per-day");
  </script>

</body>
</html>
